<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DANIBOOM WEB | Principal</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Orbitron',sans-serif}
body{background:#0b0b0b;color:#fff}

/* HEADER */
header{
  position:fixed;top:0;width:100%;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;
  padding:1rem 2rem;background:rgba(0,0,0,.5);
  backdrop-filter:blur(10px);
}
.logo{display:flex;align-items:center;gap:1rem}
.logo img{width:50px;height:50px;border-radius:50%;border:2px solid gold}
.logo span{
  font-family:'Press Start 2P';
  font-size:.85rem;color:#ffd700;
  text-shadow:0 0 8px gold,0 0 20px gold;
}

/* MENU */
.menu-btn{width:26px;display:flex;flex-direction:column;gap:5px;cursor:pointer}
.menu-btn span{height:3px;background:gold;border-radius:3px}
.menu-popup{
  position:absolute;top:60px;right:0;
  background:#111;border:2px solid gold;border-radius:14px;
  padding:1rem;display:none;flex-direction:column;
  min-width:260px;gap:.6rem;
}

/* PERFIL */
.profile-box{
  background:#222;border:2px solid gold;border-radius:14px;
  padding:1rem;display:flex;flex-direction:column;
  align-items:center;gap:.5rem;
}
.profile-pic{
  width:60px;height:60px;border-radius:50%;
  border:2px solid gold;background:#000;
}
.profile-name{font-weight:700}

/* ===== COLORES DE ROLES ===== */
.role-anon{color:#666}
.role-sub{color:#ffd700;text-shadow:0 0 10px #ffd700}
.role-admin{color:#ff9800;text-shadow:0 0 10px #ff9800}
.role-owner{color:#ff0000;text-shadow:0 0 12px #ff0000}

/* ===== INSIGNIAS ===== */
.badge{width:26px;height:26px;position:relative}

/* üï∂Ô∏è AN√ìNIMO (HACKER / MISTERIOSO) */
.badge-anon{
  background:#444;
  border-radius:50% 50% 40% 40%;
}
.badge-anon::before{
  content:"";
  position:absolute;
  top:4px;left:5px;
  width:16px;height:14px;
  background:#333;
  border-radius:50% 50% 40% 40%;
}
.badge-anon::after{
  content:"";
  position:absolute;
  bottom:3px;left:6px;
  width:14px;height:6px;
  background:#222;
  border-radius:0 0 8px 8px;
}

/* ‚≠ê SUSCRIPTOR (ESTRELLA PRO) */
.badge-sub{
  background:#ffd700;
  clip-path:polygon(
    50% 0%, 63% 34%, 98% 35%, 70% 57%,
    80% 95%, 50% 72%, 20% 95%, 30% 57%,
    2% 35%, 37% 34%
  );
  box-shadow:0 0 12px #ffd700,0 0 24px #ffd700;
}

/* üõ°Ô∏è ADMIN (ESCUDO PRO) */
.badge-admin{
  background:#ff9800;
  clip-path:polygon(
    15% 0%,85% 0%,100% 30%,
    50% 100%,0% 30%
  );
  box-shadow:0 0 12px #ff9800,0 0 25px #ff9800;
}
.badge-admin::after{
  content:"";
  position:absolute;inset:4px;
  background:#cc7a00;
  clip-path:inherit;
}

/* üëë DUE√ëO (CORONA PRO) */
.badge-owner{
  background:#ff0000;
  clip-path:polygon(
    0% 100%,10% 40%,30% 65%,50% 30%,
    70% 65%,90% 40%,100% 100%
  );
  box-shadow:0 0 14px #ff0000,0 0 30px #ff0000;
}

/* BOTONES */
.profile-buttons{display:flex;width:100%;gap:.4rem}
.profile-buttons button{
  flex:1;padding:.4rem;border:none;border-radius:10px;
  background:gold;color:#000;font-weight:700;cursor:pointer;
}

/* ADMIN UTILS */
#adminUtils{
  display:none;width:100%;
  border:2px solid red;border-radius:12px;
  padding:.5rem;background:#111;
}
#adminUtils h3{
  color:red;text-align:center;font-size:.85rem;margin-bottom:.3rem;
}
#adminUtils button{
  width:100%;padding:.4rem;border:none;border-radius:8px;
  background:red;color:white;font-weight:700;
}

/* LINKS */
.menu-texts{
  display:flex;flex-direction:column;gap:.4rem;
}
.menu-texts span{
  cursor:pointer;color:#ffd700;
  font-weight:700;text-decoration:underline;
}

/* MAIN */
main{padding:140px 2rem}
.title{text-align:center;font-size:2.2rem;color:#ffd700}
.desc{text-align:center;color:#aaa;margin-top:.5rem}
</style>
</head>

<body>

<header>
  <div class="logo">
    <img src="logo.png">
    <span>DANIBOOM WEB</span>
  </div>

  <div style="position:relative">
    <div class="menu-btn" id="menuBtn"><span></span><span></span><span></span></div>

    <div class="menu-popup" id="menuPopup">
      <div class="profile-box">
        <div class="profile-pic"></div>

        <p id="profileName" class="profile-name"></p>

        <div style="display:flex;align-items:center;gap:.4rem">
          <div id="roleBadge" class="badge"></div>
          <span id="profileRole"></span>
        </div>

        <div class="profile-buttons" id="profileButtons"></div>

        <div id="adminUtils">
          <h3>Admin Utils</h3>
          <button onclick="location.href='notificaciones.html'">Notificaciones</button>
        </div>
      </div>

      <div class="menu-texts">
        <span id="redesLink">Redes</span>
        <span id="sensLink">Sensibilidades</span>
        <span id="appsLink">Aplicaciones Pro</span>
      </div>
    </div>
  </div>
</header>

<main>
  <h1 class="title">Bienvenido</h1>
  <p class="desc">Zona oficial DaniBoom</p>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

initializeApp({
  apiKey:"AIzaSyChOQg743fsmGK89KVLoNAri_VGklArRi4",
  authDomain:"web1-3b83a.firebaseapp.com",
  projectId:"web1-3b83a"
});

const auth=getAuth();
const db=getFirestore();

menuBtn.onclick=()=>menuPopup.style.display=
menuPopup.style.display==="flex"?"none":"flex";

onAuthStateChanged(auth, async user=>{
  if(!user){location.href="index.html";return;}
  const snap=await getDoc(doc(db,"users",user.uid));
  if(!snap.exists())return;

  const d=snap.data();
  const roles={
    anonymous:{n:"An√≥nimo",c:"role-anon",b:"badge-anon"},
    suscriptor:{n:"Suscriptor",c:"role-sub",b:"badge-sub"},
    admin:{n:"Admin",c:"role-admin",b:"badge-admin"},
    owner:{n:"Due√±o",c:"role-owner",b:"badge-owner"}
  };
  const r=roles[d.membership];

  profileName.textContent=d.displayName;
  profileRole.textContent=r.n;
  profileRole.className=r.c;
  roleBadge.className="badge "+r.b;

  redesLink.style.display="block";
  sensLink.style.display=d.membership==="anonymous"?"none":"block";
  appsLink.style.display=d.membership==="anonymous"?"none":"block";
  adminUtils.style.display=
    (d.membership==="admin"||d.membership==="owner")?"block":"none";

  profileButtons.innerHTML=
    d.membership==="anonymous"
    ?`<button onclick="location.href='index.html'">Iniciar sesi√≥n</button>`
    :`<button onclick="location.href='rede.html'">Perfil</button>
       <button id="logoutBtn">Salir</button>`;

  if(d.membership!=="anonymous")
    document.getElementById("logoutBtn").onclick=
      ()=>signOut(auth).then(()=>location.href="index.html");
});

redesLink.onclick=()=>location.href="rede.html";
sensLink.onclick=()=>location.href="sensibilidades.html";
appsLink.onclick=()=>location.href="aplicaciones.html";
</script>

</body>
</html>
