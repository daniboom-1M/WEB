<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DANIBOOM WEB | Principal</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --neon-gold: #ffd700;
            --neon-red: #ff0000;
            --neon-blue: #00f2ff;
            --glass: rgba(0, 0, 0, 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Orbitron', sans-serif; }
        body { 
            background: radial-gradient(circle at center, #111 0%, #050505 100%); 
            color: #fff; 
            overflow-x: hidden; 
            min-height: 100vh;
        }

        /* --- HEADER MAESTRO --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            padding: 1rem 2rem; background: var(--glass);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--neon-gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .logo { display: flex; align-items: center; gap: 1rem; cursor: pointer; }
        .logo img { 
            width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--neon-gold); 
            box-shadow: 0 0 15px var(--neon-gold); transition: 0.3s;
        }
        .logo:hover img { transform: scale(1.1); }
        .logo span { font-family: 'Press Start 2P'; font-size: 0.85rem; color: var(--neon-gold); text-shadow: 0 0 10px var(--neon-gold); }

        .header-right { display: flex; align-items: center; gap: 25px; }

        /* --- CAMPANA --- */
        .notif-container { position: relative; cursor: pointer; font-size: 1.8rem; color: var(--neon-gold); transition: 0.3s; }
        .bell-shake { animation: shake 0.5s infinite; color: var(--neon-red) !important; filter: drop-shadow(0 0 15px var(--neon-red)); }
        .notif-dot { position: absolute; top: -2px; right: -2px; width: 12px; height: 12px; background: var(--neon-red); border-radius: 50%; display: none; border: 2px solid black; box-shadow: 0 0 10px var(--neon-red); }

        @keyframes shake { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(15deg); } 75% { transform: rotate(-15deg); } }

        /* --- BOTÓN MENÚ --- */
        .menu-btn { width: 28px; display: flex; flex-direction: column; gap: 5px; cursor: pointer; }
        .menu-btn span { height: 3px; background: var(--neon-gold); border-radius: 3px; transition: .4s; box-shadow: 0 0 5px var(--neon-gold); }
        .menu-btn.active span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        .menu-btn.active span:nth-child(2) { opacity: 0; }
        .menu-btn.active span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

        /* --- MENÚ POPUP --- */
        .menu-popup {
            position: fixed; top: 85px; right: 20px; background: rgba(10, 10, 10, 0.95); 
            border: 2px solid var(--neon-gold); border-radius: 20px; padding: 1.5rem; display: none; 
            flex-direction: column; min-width: 300px; backdrop-filter: blur(15px);
            box-shadow: 0 0 40px rgba(0,0,0,0.8);
        }
        .profile-card { background: rgba(255,255,255,0.05); border: 1px solid var(--neon-gold); border-radius: 15px; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px; margin-bottom: 10px;}
        .profile-pic { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--neon-gold); object-fit: cover; box-shadow: 0 0 10px var(--neon-gold); }

        .nav-item { 
            font-size: 0.8rem; font-weight: 800; color: var(--neon-gold); text-transform: uppercase; 
            cursor: pointer; padding: 12px; border-radius: 8px; display: flex; align-items: center; gap: 12px; transition: 0.3s;
        }
        .nav-item:hover { background: rgba(255, 215, 0, 0.1); text-shadow: 0 0 8px var(--neon-gold); }

        .admin-box { border: 2px solid var(--neon-red); background: rgba(255,0,0,0.05); padding: 15px; border-radius: 15px; margin-top: 10px; box-shadow: 0 0 15px var(--neon-red); display: none; }

        /* --- NOTIFICACIONES --- */
        .notif-panel { 
            position: fixed; top: 0; right: -100%; width: 100%; height: 100vh; 
            background: rgba(0,0,0,0.98); z-index: 2000; transition: 0.6s cubic-bezier(0.7, 0, 0.3, 1); 
            display: flex; flex-direction: column; align-items: center; padding: 2rem; overflow-y: auto;
        }
        .notif-panel.active { right: 0; }
        .notif-card { border: 2px solid; background: #000; padding: 20px; border-radius: 20px; width: 100%; max-width: 450px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        /* --- NUEVOS ESTILOS LANDING DANIBOOM X FF --- */
        main { padding-top: 120px; }
        
        .scroll-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px 20px;
            opacity: 0;
            transform: translateY(100px) scale(0.9);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            filter: blur(10px);
        }

        .scroll-section.is-visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            filter: blur(0px);
        }

        .neon-gun {
            width: 140px;
            filter: drop-shadow(0 0 15px var(--neon-gold));
            animation: weapon-float 3s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes weapon-float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .ff-logo-text {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 10vw, 4.5rem);
            font-weight: 900;
            letter-spacing: 5px;
            color: #fff;
            font-style: italic;
            text-transform: uppercase;
            text-shadow: 4px 4px 0px #000;
            margin-bottom: 15px;
        }

        .yellow-knife {
            color: #ffcc00;
            filter: drop-shadow(0 0 10px #ffcc00);
            display: inline-block;
        }

        .x-neon {
            color: var(--neon-red);
            text-shadow: 0 0 20px var(--neon-red);
            font-family: 'Press Start 2P';
            font-size: 0.8em;
        }

        .neon-badge {
            font-family: 'Press Start 2P';
            font-size: 0.65rem;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            background: rgba(0, 242, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid var(--neon-blue);
        }

        .video-container {
            width: 100%;
            max-width: 850px;
            border: 4px solid var(--neon-gold);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
            margin: 40px 0;
        }

        .video-container iframe { width: 100%; aspect-ratio: 16/9; display: block; }

        .speech-bubble {
            background: rgba(255, 255, 255, 0.05);
            border-left: 6px solid var(--neon-red);
            padding: 30px;
            border-radius: 0 20px 20px 0;
            max-width: 800px;
            text-align: left;
        }

        .speech-bubble h3 { color: var(--neon-gold); margin-bottom: 10px; font-family: 'Press Start 2P'; font-size: 0.8rem; }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 900px;
            margin-top: 40px;
        }

        .social-card {
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(255,215,0,0.3);
            background: rgba(0,0,0,0.5);
            cursor: pointer;
            transition: 0.3s;
            text-align: center;
        }

        .social-card:hover { 
            transform: translateY(-10px); 
            border-color: var(--neon-gold);
            background: rgba(255,215,0,0.1);
        }

        .social-card i { font-size: 2rem; margin-bottom: 10px; }
        .fa-youtube { color: #ff0000; }
        .fa-tiktok { color: #fff; }
        .fa-facebook { color: #1877f2; }
        .fa-instagram { color: #e4405f; }

    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">
        <img src="logo.png">
        <span>DANIBOOM</span>
    </div>

    <div class="header-right">
        <div id="notifBtn" class="notif-container">
            <i class="fas fa-bell" id="bellIcon"></i>
            <span id="notifDot" class="notif-dot"></span>
        </div>
        <div id="menuBtn" class="menu-btn">
            <span></span><span></span><span></span>
        </div>
    </div>

    <div class="menu-popup" id="menuPopup">
        <div class="profile-card">
            <img src="" id="profilePic" class="profile-pic">
            <h3 id="profileName">Cargando...</h3>
            <div id="roleUI"></div>
        </div>

        <div id="itemSesion" style="display:none;">
            <div class="nav-item" onclick="location.href='perfil.html'">
                <i class="fas fa-user-circle"></i><span>Ver Mi Sesión</span>
            </div>
            <div class="nav-item" onclick="location.href='chat.html'">
                <i class="fas fa-comments"></i><span>Chat Global</span>
            </div>
        </div>

        <div class="nav-item" onclick="location.href='redes.html'">
            <i class="fas fa-share-nodes"></i><span>Nuestras Redes</span>
        </div>

        <div id="linksPrivados" style="display:none;">
            <div class="nav-item" onclick="location.href='sensibilidades.html'">
                <i class="fas fa-crosshairs"></i><span>Sensibilidades</span>
            </div>
            <div class="nav-item" onclick="location.href='apps.html'">
                <i class="fas fa-bolt"></i><span>Apps Optimizadas</span>
            </div>
        </div>

        <div id="adminUtils" class="admin-box">
            <p style="color:red; font-size:0.55rem; font-family:'Press Start 2P'; text-align:center; margin-bottom:10px;">PANEL CONTROL</p>
            <button onclick="location.href='notificaciones.html'" style="width:100%; background:red; color:white; border:none; padding:10px; border-radius:8px; font-weight:bold; cursor:pointer; font-size:0.7rem;">LANZAR AVISO</button>
        </div>

        <div id="sessionBtnArea"></div>
    </div>
</header>

<aside class="notif-panel" id="notifPanel">
    <span id="closeNotif" style="position:absolute; top:25px; right:35px; font-size:3rem; color:gold; cursor:pointer;">&times;</span>
    <h2 style="color:gold; font-family:'Press Start 2P'; margin-top:60px; margin-bottom:30px; font-size:0.8rem;">CENTRO DE AVISOS</h2>
    <div id="notifContainer" style="width:100%; display:flex; flex-direction:column; align-items:center;"></div>
</aside>

<main>
    <section class="scroll-section">
        <img src="https://img.icons8.com/neon/96/assault-rifle.png" class="neon-gun" alt="pistola">
        <div class="ff-logo-text">
            DANIBOOM <span class="x-neon">X</span> FREE F<span class="yellow-knife">I</span>RE
        </div>
        <p class="neon-badge">INFLUENCER OFICIAL</p>
    </section>

    <section class="scroll-section">
        <h2 style="font-family:'Press Start 2P'; color:var(--neon-gold); font-size:1rem; margin-bottom:20px;">MI AGRADECIMIENTO</h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/TU_VIDEO_ID" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="speech-bubble">
            <h3>¡LO LOGRAMOS EQUIPO!</h3>
            <p>Gracias a cada uno de ustedes por el apoyo en todas mis plataformas. Por fin soy parte del programa de influencers de Free Fire. En esta web encontrarán todo lo que necesitan para mejorar su nivel: sensibilidades, apps y mucho más.</p>
        </div>
    </section>

    <section class="scroll-section">
        <h2 style="font-family:'Press Start 2P'; color:var(--neon-gold); font-size:1rem; margin-bottom:20px;">SÍGUEME EN MIS REDES</h2>
        <div class="social-grid">
            <div class="social-card" onclick="window.open('TU_LINK_YOUTUBE')">
                <i class="fab fa-youtube"></i><br>YOUTUBE
            </div>
            <div class="social-card" onclick="window.open('TU_LINK_TIKTOK')">
                <i class="fab fa-tiktok"></i><br>TIKTOK
            </div>
            <div class="social-card" onclick="window.open('TU_LINK_FB')">
                <i class="fab fa-facebook"></i><br>FACEBOOK
            </div>
            <div class="social-card" onclick="window.open('TU_LINK_IG')">
                <i class="fab fa-instagram"></i><br>INSTAGRAM
            </div>
        </div>
    </section>
</main>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, collection, query, onSnapshot, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyChOQg743fsmGK89KVLoNAri_VGklArRi4",
        authDomain: "web1-3b83a.firebaseapp.com",
        projectId: "web1-3b83a"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const db = getFirestore();

    // --- LÓGICA DE ANIMACIÓN SCROLL ---
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
            } else {
                entry.target.classList.remove('is-visible');
            }
        });
    }, { threshold: 0.15 });

    document.querySelectorAll('.scroll-section').forEach(s => observer.observe(s));

    // --- LÓGICA DE ROLES Y UI ---
    onAuthStateChanged(auth, async (user) => {
        if (user) {
            let snap = await getDoc(doc(db, "users", user.uid));
            let d = snap.data() || {};
            
            if(!snap.exists() && user.isAnonymous){
                const all = await getDocs(collection(db, "users"));
                const num = String(all.size + 1).padStart(3, '0');
                d = { displayName: `Anónimo #${num}`, membership: 'anonymous', photoURL: 'logo.png' };
                await setDoc(doc(db, "users", user.uid), d);
            }

            const role = d.membership || 'anonymous';
            const roleConfig = {
                owner: { icon: 'crown', color: '#ff0000', label: 'OWNER' },
                admin: { icon: 'shield-alt', color: '#00f2ff', label: 'ADMIN' },
                suscriptor: { icon: 'star', color: 'gold', label: 'SUSCRIPTOR' },
                anonymous: { icon: 'user-secret', color: '#888', label: 'ANÓNIMO' }
            };
            const currentRole = roleConfig[role] || roleConfig['anonymous'];

            document.getElementById('roleUI').innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px; margin-top: 5px; font-weight: 800; font-size: 0.75rem; color: ${currentRole.color}; text-shadow: 0 0 10px ${currentRole.color}55;">
                    <i class="fas fa-${currentRole.icon}"></i><span>${currentRole.label}</span>
                </div>
            `;

            document.getElementById('profileName').innerText = d.displayName || "Usuario";
            document.getElementById('profilePic').src = d.photoURL || "logo.png";
            
            const tieneAccesoPrivado = (role === 'suscriptor' || role === 'admin' || role === 'owner');

            document.getElementById('itemSesion').style.display = tieneAccesoPrivado ? 'block' : 'none';
            document.getElementById('linksPrivados').style.display = tieneAccesoPrivado ? 'block' : 'none';
            document.getElementById('adminUtils').style.display = (role === 'admin' || role === 'owner') ? 'block' : 'none';
            
            document.getElementById('sessionBtnArea').innerHTML = user.isAnonymous
                ? `<button onclick="location.href='index.html'" style="width:100%; background:gold; color:black; border:none; padding:12px; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:bold; font-family:'Orbitron';">REGISTRARSE</button>`
                : `<button id="logoutBtn" style="width:100%; background:#222; color:white; border:none; padding:12px; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:bold; font-family:'Orbitron';">CERRAR SESIÓN</button>`;

            if(!user.isAnonymous) {
                document.getElementById('logoutBtn').onclick = () => signOut(auth).then(()=> location.reload());
            }

            escucharNotificaciones();
        } else { location.href = "index.html"; }
    });

    // --- LÓGICA DE NOTIFICACIONES ---
    function escucharNotificaciones() {
        const q = query(collection(db, "notifications"), orderBy("createdAt", "desc"));
        onSnapshot(q, (snapshot) => {
            let lastNotifId = null;
            const container = document.getElementById('notifContainer');
            container.innerHTML = ""; 
            snapshot.forEach((doc) => {
                const data = doc.data();
                const id = doc.id;
                const timeLeft = data.duration - ((Date.now() - data.createdAt) / 1000);
                if (timeLeft > 0) {
                    if (!lastNotifId) lastNotifId = id;
                    renderNotif(id, data, timeLeft);
                }
            });
            const readId = localStorage.getItem('lastReadNotif');
            if (lastNotifId && lastNotifId !== readId) {
                document.getElementById('bellIcon').classList.add('bell-shake');
                document.getElementById('notifDot').style.display = 'block';
            }
        });
    }

    function renderNotif(id, data, seconds) {
        const container = document.getElementById('notifContainer');
        const card = document.createElement('div');
        card.className = "notif-card";
        card.id = `card-${id}`;
        
        const configs = {
            'youtube': { icon: 'fab fa-youtube', color: '#ff0000' },
            'tiktok': { icon: 'fab fa-tiktok', color: '#ffffff' },
            'aviso': { icon: 'fas fa-exclamation-triangle', color: '#ffff00' }
        };

        const theme = configs[data.iconType] || { icon: 'fas fa-bell', color: '#ffd700' };
        card.style.borderColor = theme.color;
        card.style.boxShadow = `0 0 20px ${theme.color}44`;

        const btnHTML = (data.link && data.link !== "#") 
            ? `<button onclick="window.open('${data.link}', '_blank')" style="width:100%; background:${theme.color}; color:#000; border:none; padding:12px; margin-top:15px; font-weight:bold; border-radius:10px; cursor:pointer;">VER AHORA</button>`
            : '';

        card.innerHTML = `
            <div style="display:flex; align-items:center; gap:12px; color:${theme.color}; margin-bottom:12px;">
                <i class="${theme.icon}" style="font-size:1.6rem;"></i><span style="font-weight:800;">${data.title}</span>
            </div>
            <p style="font-size:0.85rem; color:#eee;">${data.message}</p>
            ${btnHTML}
            <div style="font-size:0.6rem; color:#
